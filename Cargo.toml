[package]
name = "phi-backend"
version = "0.1.0"
edition = "2024"

[dependencies]
# 核心异步与服务框架
tokio = { version = "1.41", features = ["full"] }
axum = "0.7.9"

# 序列化与JSON
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# 错误处理与日志
thiserror = "2.0"
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter"] }

# 网络请求与加密工具
reqwest = { version = "0.12", features = ["stream", "json"] }
aes = "0.8"
cbc = "0.1"
cipher = "0.4"
aes-gcm = "0.10"
pbkdf2 = "0.12"
hmac = "0.12"
sha1 = "0.10"
sha2 = "0.10"
digest = "0.10"
zip = "2.2"
flate2 = "1.0"
base64 = "0.22"
hex = "0.4"
csv = "1.3"
serde_yaml = "0.9"
rand = "0.8"
moka = { version = "0.12", features = ["future"] }
qrcode = "0.14"
uuid = { version = "1", features = ["v4", "fast-rng"] }
gethostname = "0.4"

# 指标与监控
metrics = "0.22"
metrics-exporter-prometheus = "0.15"

# SQLite 持久化
sqlx = { version = "0.7", default-features = false, features = ["runtime-tokio-rustls", "sqlite", "macros", "chrono", "json"] }

# Parquet 导出（通过 Arrow）
parquet = { version = "53", features = ["arrow"] }
arrow-array = "53"
arrow-schema = "53"
arrow-buffer = "53"

# OpenAPI 支持
utoipa = { version = "5.2", features = ["axum_extras"] }
utoipa-swagger-ui = { version = "8.0", features = ["axum"] }

# 配置文件支持
config = "0.14"
toml = "0.8"
once_cell = "1.20"

# Git 操作
git2 = "0.19"

# 时间与日期
chrono = { version = "0.4", features = ["serde"] }
chrono-tz = "0.9"

# SVG 渲染为 PNG
resvg = "0.43"
tiny-skia = { version = "0.11", features = ["png"] }
png = "0.17"
image = "0.25"
lru = "0.12"
num_cpus = "1.16"

# systemd 支持（可���依赖，仅在Linux下生效）
[target.'cfg(target_os = "linux")'.dependencies]
sd-notify = "0.4"

[profile.release]
debug = true